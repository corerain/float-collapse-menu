(function(e){function t(t){for(var i,l,a=t[0],s=t[1],c=t[2],p=0,d=[];p<a.length;p++)l=a[p],Object.prototype.hasOwnProperty.call(n,l)&&n[l]&&d.push(n[l][0]),n[l]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i]);u&&u(t);while(d.length)d.shift()();return r.push.apply(r,c||[]),o()}function o(){for(var e,t=0;t<r.length;t++){for(var o=r[t],i=!0,a=1;a<o.length;a++){var s=o[a];0!==n[s]&&(i=!1)}i&&(r.splice(t--,1),e=l(l.s=o[0]))}return e}var i={},n={app:0},r=[];function l(t){if(i[t])return i[t].exports;var o=i[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,l),o.l=!0,o.exports}l.m=e,l.c=i,l.d=function(e,t,o){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(l.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)l.d(o,i,function(t){return e[t]}.bind(null,i));return o},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],s=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var u=s;r.push(["e35a","chunk-vendors"]),o()})({3846:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAQFJREFUSEvdlUsOwjAMRMeFLfQA7T5cg2MhBP1IcChuEoldewHomg5KP1IXfNyFJUS2SfwytscRGC8xjg8VgGR3TkQ490G/ARhfTTICwDlKVAp8fT8RbDdpfJgLeQsguRCRx7Vutg/yAmCJSHKXrIqwB6DVKPkEkDGAr5oMYN6lKpLMJatSq+RrikIHBZCvbjkgWQ9h4ZI41yhRAfoOldZXzRFgMSgZ0/Wx8F8BIdjggyjUxFe3ApDjoKR0SZyNKl95RAWYQHol9X0H4twFFJxdut6/g/wGwDRFQ3C7Ipu16bRoJkYzHxXTnjYZdq9Mo50/07sqH/zPjzb3P+4nifF6ArE/5hnpMme/AAAAAElFTkSuQmCC"},"741c":function(e,t,o){e.exports=o.p+"img/map-pos.da99b170.svg"},"7ce5":function(e,t,o){"use strict";var i=o("eeb1"),n=o.n(i);n.a},a9cd:function(e,t,o){},d678:function(e,t,o){"use strict";var i=o("a9cd"),n=o.n(i);n.a},e35a:function(e,t,o){"use strict";o.r(t);var i=o("2b0e"),n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("div",{staticClass:"test-demo-page"},[o("div",{staticClass:"test-demo-page-content"},[o("float-collapse-menu",{attrs:{list:e.list,"scroll-el":".test-demo-page",props:e.props},model:{value:e.modelValue,callback:function(t){e.modelValue=t},expression:"modelValue"}})],1)])])},r=[],l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"float-menu-comp bsizing",style:{maxWidth:e.maxWidth+"px"},on:{click:function(t){return t.stopPropagation(),e.focus(t)}}},[i("div",{staticClass:"float-menu-content flex-c bsizing"},[e._m(0),i("span",{staticClass:"float-menu-text overflow_oneline"},[e._v(" "+e._s(e.name)+" ")]),i("span",{staticClass:"float-menu-arrow-icon"})]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],class:["cr-popover cr-float-menu-popover",e.visible?"cr-popover-show":"cr-popover-hide"]},e._l(e.popoverList,(function(t,n){return i("ul",{key:n,class:["cr-popover-item",n===e.popoverList.length-1?"cr-popover-item-last":""],style:{width:e.popoverItemWidth+"px",top:t.top+"px",left:t.left+"px",height:t.height+"px"}},e._l(t.data,(function(t){return i("li",{key:t[e.props.value],class:["flex-v-c",e.value===t[e.props.value]?"active":"",e.setNodeHoveBg(e.hoverFullId,t[e.props.value]+"")?"hover":""],on:{mouseenter:function(o){return e.mouseenter(o,t,n)},mouseleave:e.mouseleave,click:function(o){return o.stopPropagation(),e.handleSelect(t)}}},[i("div",{class:["select-tips-icon",e.value===t[e.props.value]?"active":""]}),i("div",{staticClass:"select-text overflow_oneline"},[e._v(" "+e._s(t[e.props.label])+" ")]),t.children&&t.children.length?i("div",{staticClass:"children-tips-icon flex-c"},[i("img",{staticClass:"arrow-right-detail",attrs:{src:o("3846"),alt:""}})]):e._e()])})),0)})),0)])},a=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"float-menu-icon flex-c"},[i("img",{attrs:{src:o("741c"),alt:""}})])}],s=(o("99af"),o("4160"),o("caad"),o("fb6a"),o("b0c0"),o("a9e3"),o("ac1f"),o("2532"),o("1276"),o("159b"),o("b85c")),c=function(e,t,o){if(e)if(document.addEventListener)e.addEventListener(t,o,!1);else if(document.attachEvent)e.attachEvent("on"+t,o);else{var i=e["on"+t];e["on"+t]=function(){i(),o&&o()}}},u=function(e,t,o){e&&(document.removeEventListener?e.removeEventListener(t,o):document.detachEvent?e.detachEvent("on"+t,o):e["on"+t]=null)},p={props:{list:{type:Array,default:function(){return[]}},props:{type:Object,default:function(){return{label:"label",value:"value",children:"children"}}},value:[String,Number],maxWidth:{type:Number,default:304},minWidth:{type:Number,default:180},popoverItemWidth:{type:Number,default:224},borderWidth:{type:Number,default:1.5},scrollEl:{type:String,default:"body"}},model:{prop:"value",event:"change"},data:function(){return{popoverList:[],visible:!1,name:"",fullId:"",symbol:" / ",viewWidth:0,viewHeight:0,margin:8,lineHeight:40,posStr:"",hoverFullId:"",percent:.8,hasInitWidth:!1,popoverEl:null,placement:"bottom-right"}},created:function(){this.combineData(this.list),this.posStr=this.placement},mounted:function(){var e=document.documentElement;this.viewWidth=e.clientWidth,this.viewHeight=e.clientHeight;var t=this.$el.querySelector(".cr-popover"),o=document.querySelector("body");this.popoverEl=t,o.append?o.append(t):o.appendChild(t),c(document,"click",this.blur),c(window,"resize",this.blur);var i=document.querySelector(this.scrollEl);c(i,"scroll",this.scrollSetPos)},methods:{combineData:function(e,t){var o=this,i=this.props,n=this.symbol;e.forEach((function(e){var r=e[i.label],l=e[i.value],a=e[i.children];t?(e.fullId=t.fullId+n+l,e.fullName=t.fullName+n+r):(e.fullId=l+"",e.fullName=r),a&&a.length&&o.combineData(a,e),o.value===l&&(o.setShowNameSlice(e.fullName),o.fullId=e.fullId.includes(n)?e.fullId.split(n):[e.fullId])}))},updatePopoverList:function(e){var t={top:0,left:0,height:0,data:e};this.popoverList.push(t)},mouseenter:function(e,t,o){this.hoverFullId=t.fullId;var i=e.target;this.popoverList=this.popoverList.slice(0,o+1);var n=t.children;if(n&&n.length){this.updatePopoverList(n);var r=this.popoverList[this.popoverList.length-1],l=this.popoverList[this.popoverList.length-2];this.setNodePos(i,r,l)}},setNodeHoveBg:function(e,t){var o=this.symbol;if(e.includes(o)){var i=e.split(o);return i.includes(t+"")}return[e].includes(t+"")},mouseleave:function(){},focus:function(){if(console.log("float menu focus"),this.visible=!this.visible,this.popoverList=[],this.list.length){this.updatePopoverList(this.list);var e=this.popoverList[0];this.setRootPos(e)}},blur:function(){this.visible=!1,this.popoverList=[],this.posStr=this.placement,this.hoverFullId=""},setRootPos:function(e){var t=this.popoverItemWidth,o=this.viewWidth,i=this.viewHeight,n=0,r=0,l=0,a=this.$el,s=a.getBoundingClientRect(),c=s.left,u=s.right,p=s.bottom,d=s.top,h=this.margin,f=this.percent,v=2*(this.borderWidth+h),m=function(e,t,o,i){e.top=t,e.left=o,e.height=i},g=o-s.left;r=g>=t?c:u-t,g=i-p;var b=e.data.length*this.lineHeight,w=b+v;return g>=w+h?(n=p+h,l=w,void m(e,n,r,l)):g<w+h&&g>=d?(n=p+h,l=(g-h)*f,void m(e,n,r,l)):(g=d-h,g>=w?(n=g-w,l=w,void m(e,n,r,l)):void(g<w&&d>=i-p&&(n=g*(1-f),l=g*f,m(e,n,r,l))))},setNodePos:function(e,t,o){var i=this,n=this.popoverItemWidth,r=this.viewWidth,l=this.viewHeight,a=0,c=0,u=0,p=e.getBoundingClientRect(),d=p.left,h=p.right,f=p.bottom,v=p.top,m=this.margin,g="-",b=this.percent,w=2*(this.borderWidth+m),S=t.data.length*this.lineHeight,y=S+w,A=function(){var e=d,t=i.posStr.split(g),o="left";e>=n?c=d-n:(c=h,o="right"),i.posStr="".concat(t[0]).concat(g).concat(o)},I=function(){var e=r-h,t=i.posStr.split(g),o="right";e>=n?c=h:(c=d-n,o="left"),i.posStr="".concat(t[0]).concat(g).concat(o)},x=function(){var e=l-v,t=i.posStr.split(g),o="bottom";return e>=y?(a=v,u=y,void(i.posStr="".concat(o).concat(g).concat(t[1]))):e<y&&e>=f?(a=v,u=e*b,void(i.posStr="".concat(o).concat(g).concat(t[1]))):f>=y?(a=f-y,o="top",u=y,void(i.posStr="".concat(o).concat(g).concat(t[1]))):void(f<y&&f>e&&(a=f*(1-b),o="top",u=f*b,i.posStr="".concat(o).concat(g).concat(t[1])))},C=function(){var e=l-v,t=i.posStr.split(g),o="bottom";return f>=y?(a=f-y,o="top",u=y,void(i.posStr="".concat(o).concat(g).concat(t[1]))):f<y&&f>e?(a=f*(1-b),o="top",u=f*b,void(i.posStr="".concat(o).concat(g).concat(t[1]))):e>=y?(a=v,u=y,void(i.posStr="".concat(o).concat(g).concat(t[1]))):e<y&&e>=f?(a=v,u=e*b,void(i.posStr="".concat(o).concat(g).concat(t[1]))):void 0},N=function(e){switch(e){case"left":A();break;case"right":I();break;case"bottom":x();break;case"top":C();break;default:break}};this.posStr=o.childPos||this.placement;var L,E=this.posStr.split(g),P=Object(s["a"])(E);try{for(P.s();!(L=P.n()).done;){var H=L.value;N(H)}}catch(k){P.e(k)}finally{P.f()}o.childPos=this.posStr,t.childPos=this.posStr,t.top=a,t.left=c,t.height=u},handleSelect:function(e){this.setShowNameSlice(e.fullName),this.fullId=e.fullId;var t=e[this.props.value];this.hasInitWidth||(this.hasInitWidth=!0,this.$el.style.width="auto"),this.$emit("change",t),this.$emit("select",e),this.blur()},setShowNameSlice:function(e){var t=18,o=e.length,i=e.length*t,n=this.maxWidth-28-20-16-2-54;if(i>n){var r=Math.ceil(n/t);this.name="...".concat(e.slice(o-r-1))}else this.name=e},scrollSetPos:function(){this.visible&&this.blur()},dispose:function(){this.blur();var e=this.popoverEl;e.parentNode.removeChild(e),this.popoverEl=null,u(document,"click",this.blur),u(window,"resize",this.blur);var t=document.querySelector(this.scrollEl);u(t,"scroll",this.scrollSetPos)}},beforeDestroy:function(){this.dispose()}},d=p,h=(o("7ce5"),o("2877")),f=Object(h["a"])(d,l,a,!1,null,"66e3a19a",null),v=f.exports,m={name:"App",components:{FloatCollapseMenu:v},data:function(){return{list:[{areaLevel:0,cameraId:7,children:[{areaLevel:1,cameraId:null,children:[{areaLevel:2,cameraId:null,children:[{areaLevel:3,cameraId:null,children:[{areaLevel:4,cameraId:null,children:[],defAreaConfig:{},flowHeat:0,id:9,name:"333",pictureUrl:"",pid:8,sortNumber:0}],defAreaConfig:{},flowHeat:0,id:8,name:"2222",pictureUrl:"",pid:7,sortNumber:0}],defAreaConfig:{},flowHeat:0,id:7,name:"111",pictureUrl:"",pid:2,sortNumber:0}],defAreaConfig:{},flowHeat:0,id:2,name:"济南",pictureUrl:"",pid:1,sortNumber:0}],defAreaConfig:{h:.21776590223741024,w:.24181502416636447,x:.17547024435425684,y:.10596300884199733},flowHeat:0,id:1,name:"山东",pictureUrl:"/static/uploadFiles/backgroundImages/49fa82fc-d0c6-460c-9e58-9cb704771e1f.jpg",pid:0,sortNumber:4},{areaLevel:0,cameraId:4,children:[],defAreaConfig:{h:.3051103747608158,w:.3047619047619048,x:.18857142857142856,y:.12708731973678067},flowHeat:0,id:4,name:"北京",pictureUrl:"/static/uploadFiles/backgroundImages/0e8ca7f7-6153-46b5-9947-e33df0da4351.jpg",pid:0,sortNumber:2},{areaLevel:0,cameraId:null,children:[],defAreaConfig:{},flowHeat:0,id:5,name:"济南",pictureUrl:"",pid:0,sortNumber:1},{areaLevel:0,cameraId:null,children:[],defAreaConfig:{},flowHeat:0,id:6,name:"上海",pictureUrl:"",pid:0,sortNumber:0}],props:{label:"name",value:"id",children:"children"},modelValue:1}}},g=m,b=(o("d678"),Object(h["a"])(g,n,r,!1,null,null,null)),w=b.exports;o("fa4c");i["a"].config.productionTip=!1,new i["a"]({render:function(e){return e(w)}}).$mount("#app")},eeb1:function(e,t,o){},fa4c:function(e,t,o){}});
//# sourceMappingURL=app.b541ae69.js.map